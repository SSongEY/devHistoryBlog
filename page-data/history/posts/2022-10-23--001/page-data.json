{"componentChunkName":"component---src-templates-post-template-jsx","path":"/history/posts/2022-10-23--001","result":{"data":{"site":{"siteMetadata":{"title":"Blog by Eunyoung","subtitle":"작업 기록 블로그","copyright":"© All rights reserved.","author":{"name":"EunYoung","twitter":"#"},"disqusShortname":"","url":"https://ssongey.github.io"}},"markdownRemark":{"id":"31ffb30c-5afa-50a5-a298-a38a4f4bb657","html":"<h1>1. Nginx 설정</h1>\n<ul>\n<li>nginx 의 기본 body sizesms 1MB이다.</li>\n<li>이 때, 업로드 파일을 포함한 요청 사이즈가 1MB가 넘으면 413(Request Entity Too Large) 에러를 반환한다.</li>\n</ul>\n<h3>1.1. ConfigMap 으로 설정하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ConfigMap\n<span class=\"token key atrule\">proxy-body-size</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"10m\"</span>\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n<span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> ingress<span class=\"token punctuation\">-</span>nginx\n<span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">-</span>configuration</code></pre></div>\n<h3>1.2. Ingress Annotation 으로 설정하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> networking.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Ingress\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">annotations</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">nginx.ingress.kubernetes.io/proxy-body-size</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"50m\"</span></code></pre></div>\n<hr>\n<h1>2. SpringBoot 설정</h1>\n<ul>\n<li>SpringBoot 에 설정된 기본값은 1048576 bytes 이다.</li>\n<li>이 때, 업로드 파일 사이즈가 위 사이즈를 넘으면 <strong>“multipart.MaxUploadSizeExceededException”</strong> 에러가 발생한다.</li>\n</ul>\n<h3>2.1. SpringBoot 2.x 버전</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># application.yaml</span>\n<span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token key atrule\">servlet</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token key atrule\">multipart</span><span class=\"token punctuation\">:</span> \n\t\t\t<span class=\"token key atrule\">maxFileSize</span><span class=\"token punctuation\">:</span> 10MB\n\t\t\t<span class=\"token key atrule\">maxRequestSize</span><span class=\"token punctuation\">:</span> 10MB</code></pre></div>\n<h3>2.2. SpringBoot 1.4 &#x26; 1.5 버전</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token key atrule\">http</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token key atrule\">multipart</span><span class=\"token punctuation\">:</span>\n\t\t\t<span class=\"token key atrule\">maxFileSize</span><span class=\"token punctuation\">:</span> 10MB\n\t\t\t<span class=\"token key atrule\">maxRequestSize</span><span class=\"token punctuation\">:</span> 10MB</code></pre></div>\n<h3>2.3. SpringBoot 1.3.x 이하 버전</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">multipart</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token key atrule\">maxFileSize</span><span class=\"token punctuation\">:</span> 10MB\n\t<span class=\"token key atrule\">maxRequestSize</span><span class=\"token punctuation\">:</span> 10MB</code></pre></div>","fields":{"tagSlugs":["/tags/nginx/","/tags/springboot/"],"slug":"/history/posts/2022-10-23--001"},"frontmatter":{"title":"파일 업로드 크기 제한 늘리기 (Ingress Nginx & SpringBoot)","tags":["nginx","springboot"],"date":"2022-10-23","description":""}}},"pageContext":{"slug":"/history/posts/2022-10-23--001"}},"staticQueryHashes":[]}