{"componentChunkName":"component---src-templates-post-template-jsx","path":"/history/posts/2020-11-14--002","result":{"data":{"site":{"siteMetadata":{"title":"Blog by Eunyoung","subtitle":"EY's 개발 히스토리 블로그","copyright":"© All rights reserved.","author":{"name":"EunYoung","twitter":"#"},"disqusShortname":"","url":"https://eunyoung-autocrypt.github.io"}},"markdownRemark":{"id":"e249ea85-b316-5f38-b128-ecc2b3ba5165","html":"<h3>스프링 없는 순수한 DI 컨테이너</h3>\n<ul>\n<li>요청시마다 객체를 새로 생성한다\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/devHistoryBlog/static/7ba29536b82a71776fec267ced6c97ec/efeb1/002-01.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 960px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB20lEQVQoz21SuY7TUBTN18AvMNTwC/AFQw0llCCk6RCa0KSkpECJIgqkoQhNpLQmthOcxc7meImXeHecQ84bORCJKx09yXo+232NqqpwPB5RliUOh8N/kWUZ8jyHaZqQJAmj0QjKUIEsy5B+SZjNZiiKAmmaorHf7xFFEf4ditRCnO12C9/3BQI/wG63w2wxE98d24FlWSAPBRvdbhetVks40HUd4/EYk8kE8/kc6/UanufBtm0cqgPKooRhGbj+co3HH6/w/PMzmJF5NhIEARrD4RCDwQBhGMJxHKG+2WywXC6xWCxgGIaIRGLf82E7Nnq/e+hIHfwY3SEtUuA+iLgjCIl62AWJ6Y5RKOS67kUlbuxCNmWYoYnq+LcaViIiN5tN4YyRVVUVmE6nIirJ6DZJE2RJBnWu4umnJ3j4/gGuPjyCvpufhQQhSQiqsFhuiojjWHRCMDZPP/CRp7n4Oc7jiyWeCXu9Ux+dzv2lEwk3xbir1Uq4Jjm7qSdMQ9z+vMWrry9xc3cj4tcjOuz3+2i32yIat0s3JCRIXi8oSRL4Ox+aruHd97d4cdr0m2+vLwjFlknA8hmZ4COu3yZPulYUBZqmncjXsC0bkRchdEPEXgzHcoQo3yS5/gDV0t+jDGSbiwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"002 01\"\n        title=\"\"\n        src=\"/devHistoryBlog/static/7ba29536b82a71776fec267ced6c97ec/d9199/002-01.png\"\n        srcset=\"/devHistoryBlog/static/7ba29536b82a71776fec267ced6c97ec/8ff5a/002-01.png 240w,\n/devHistoryBlog/static/7ba29536b82a71776fec267ced6c97ec/e85cb/002-01.png 480w,\n/devHistoryBlog/static/7ba29536b82a71776fec267ced6c97ec/d9199/002-01.png 960w,\n/devHistoryBlog/static/7ba29536b82a71776fec267ced6c97ec/07a9c/002-01.png 1440w,\n/devHistoryBlog/static/7ba29536b82a71776fec267ced6c97ec/efeb1/002-01.png 1593w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n  <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AppConfig</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token class-name\">DataService</span> <span class=\"token function\">dataService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DataServiceImpl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token annotation punctuation\">@Test</span>\n  <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"스프링 없는 순수한 DI 컨테이너\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">void</span> <span class=\"token function\">pureContainer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">AppConfig</span> appConfig <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AppConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 호출시마다 객체를 생성</span>\n    <span class=\"token class-name\">DataService</span> dataService1 <span class=\"token operator\">=</span> appConfig<span class=\"token punctuation\">.</span><span class=\"token function\">dataService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">DataService</span> dataService2 <span class=\"token operator\">=</span> appConfig<span class=\"token punctuation\">.</span><span class=\"token function\">dataService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 참조값이 다른 것을 확인</span>\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>dataService1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isNotSameAs</span><span class=\"token punctuation\">(</span>dataService2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<h3>싱글톤 컨테이너</h3>\n<ul>\n<li>스프링 컨테이너 덕분에 요청시마다 객체를 생성하는 것이 아니라, 이미 만들어진 객체를 재사용한다.</li>\n<li>스프링 컨테이너는 싱글톤 컨테이너 역할을 한다.</li>\n<li>이렇게 싱글톤 객체를 생성하고 관리하는 기능을 싱글톤 레지스트리라 한다.\n\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/devHistoryBlog/static/e1969ad39cc239852f33e1ec5c1aa642/7bf53/002-02.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 960px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABf0lEQVQoz41Sy26CUBTke9p1+xntZzVu6rZr/8C9iQt2NHGhkihGiKBeEXwCKiBMO6eBxKZpe5PhPuDMnJmLdr1eUZYl8jwXcP8daZrifD7LvFwuYZomJpMJBoMBbNvG6XTC5XKRbzQ+ePDbCIIA2+0Wh8MBm81G9mEYCrjf7/c4Ho/wfR9at9tFs9mUg9lsBsuyMBwOMR6PsVgspGC9XuM/I4oiaCzUdR1FUdwoEyQiaJPEVZdJlCBN0pqItRx8p02nU/T7/RslZsrsmCkHCSlGS4TjO3h3DNiBjbz4/Kb8qqNLrdPpoNFoSLu0PBqNxDKtz+dzrFYreJ4n5FmaQQUKz29PuH+5w+PrA0xl1o0IIXOi7SzLsNvtEMcxkiQRAYZNG67ryprvZK9cWL6FMA5rRzWhYRhot9tywBunNVokKMDOOLOIIlxXFiuymwx7vR5arZYEToskUkpJVrTLNXMmEf+1P2+ZBCSiSmWVoBpnnjmOI0K8cYr8BDbAaD4Asc7voXsjyT0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"002 02\"\n        title=\"\"\n        src=\"/devHistoryBlog/static/e1969ad39cc239852f33e1ec5c1aa642/d9199/002-02.png\"\n        srcset=\"/devHistoryBlog/static/e1969ad39cc239852f33e1ec5c1aa642/8ff5a/002-02.png 240w,\n/devHistoryBlog/static/e1969ad39cc239852f33e1ec5c1aa642/e85cb/002-02.png 480w,\n/devHistoryBlog/static/e1969ad39cc239852f33e1ec5c1aa642/d9199/002-02.png 960w,\n/devHistoryBlog/static/e1969ad39cc239852f33e1ec5c1aa642/07a9c/002-02.png 1440w,\n/devHistoryBlog/static/e1969ad39cc239852f33e1ec5c1aa642/7bf53/002-02.png 1595w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n  <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"스프링 컨테이너와 싱글톤\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">void</span> <span class=\"token function\">springContainer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">ApplicationContext</span> ac <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AnnotationConfigApplicationContext</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AppConfig</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">DataService</span> dataService1 <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dataService\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">DataService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">DataService</span> dataService2 <span class=\"token operator\">=</span> ac<span class=\"token punctuation\">.</span><span class=\"token function\">getBean</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dataService\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">DataService</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 참조값이 동일한 것을 확인</span>\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>dataService1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isSameAs</span><span class=\"token punctuation\">(</span>dataService2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<h3>싱글톤 방식의 주의점</h3>\n<ul>\n<li>무상태(stateless)로 설계해야 한다.</li>\n</ul>","fields":{"tagSlugs":["/tags//"],"slug":"/history/posts/2020-11-14--002"},"frontmatter":{"title":"[스프링 핵심 원리 리뷰] Singleton Container","tags":[""],"date":"2020-11-14","description":""}}},"pageContext":{"slug":"/history/posts/2020-11-14--002"}},"staticQueryHashes":[]}