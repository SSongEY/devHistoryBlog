{"componentChunkName":"component---src-templates-post-template-jsx","path":"/works/posts/2020-09-15--001","result":{"data":{"site":{"siteMetadata":{"title":"Blog by Eunyoung","subtitle":"EY's 개발 히스토리 블로그","copyright":"© All rights reserved.","author":{"name":"EunYoung","twitter":"#"},"disqusShortname":"","url":"https://eunyoung-autocrypt.github.io"}},"markdownRemark":{"id":"11366e5a-9e1f-56ac-91cb-b499f0b976a6","html":"<h2>1. DB Instance 생성</h2>\n<h3>1.1. MYSQL CLI 로 접속</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># mysql -u root -p </code></pre></div>\n<p>mysql 명령어를 찾을 수 없다는 오류가 나와서 프로세스 확인 및 mysql client 설치 확인을 하였다</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># ps -ef | grep mysqld (프로세스 정상 동작 확인)\n# rpm -qa | grep mysql (mysql 설치 안되어 있음)</code></pre></div>\n<p>mysql을 rpm 으로 설치를 진행하지 않고 바이너리로 설치 한 듯 싶었다.\nmysql 바이너리가 있는 디렉토리에서 직접 수행하였더니 아래와 같은 오류가 발생하였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)</code></pre></div>\n<p>mysql.sock 파일 위치 문제로 보였으나,<br>\n담당자가 root 계정(OS)으로 접속하여 시도하니 mysql 클라이언트가 정상 동작하였다.<br>\nmysql.sock 파일 permission 문제였나? 내일 확인해 봐야겠다.</p>\n<h4>mysql.sock 파일 위치 문제시 해결 방안</h4>\n<ol>\n<li>\n<p>경로 명시</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mysql -u root -p mysql -S /var/lib/mysql/mysql.sock</code></pre></div>\n</li>\n<li>\n<p>soft link</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ln -sf /tmp/mysql.sock /var/lib/mysql/mysql.sock</code></pre></div>\n</li>\n<li>\n<p>/usr/local/mysql/bin/mysqld_safe 파일에서 아래 부분을 mysql.sock 파일이 있는 위치에 맞게 수정</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">safe_mysql_unix_port=${mysql_unix_port:-${MYSQL_UNIX_PORT:-/tmp/mysql.sock}}</code></pre></div>\n</li>\n</ol>\n<h3>1.2. DB 인스턴스 생성</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mysql> create database DB_NAME default character set utf8 collate utf8_general_ci;</code></pre></div>\n<p>default character set 부분이 외워지질 않네..</p>\n<h3>1.3. 계정 생성</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mysql> create user [USER_NAME]@'localhost' identified by '[PASSWORD]';\nmysql> create user [USER_NAME]@'%' identified by '[PASSWORD]';</code></pre></div>\n<h3>1.4. 권한 확인</h3>\n<p>1.4.1. 권한 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#접속된 계정 권한 확인\nmysql> SHOW GRANTS FOR CURRENT_USER;\n# 사용자별 권한 확인\nmysql> SHOW GRANTS FOR '사용자계정'@'호스트';</code></pre></div>\n<p>1.4.2. 권한 추가</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mysql> GRANT ALL PRIVILEGES ON [DB_NAME].[TABLE_NAME] TO [ID]@[HOST] IDENTIFIED BY '[PASSWORD]' with grant option;\n# 권한 종류\n- ALL PRIVILEGES : 모든 권한 추가 \n- SELECT, INSERT, UPDATE, DELETE, ... : 권한을 일부분을 추가 \n# with grant option 옵션\n- with grant option : GRANT를 사용할 수 있는 권한 추가 </code></pre></div>\n<h2>2. 서비스 기동</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">nohup java -jar -Duser.timezone=Asia/Seoul ${JAR_FILE} --server.port=${PORT} --spring.profiles.active=${SVC_ENV},swagger >> ./logs/server.log &amp;</code></pre></div>\n<p>옵션이 외워지지 않는다..<br>\n이제부턴 실행 스크립트도 같이 전달해야겠다.</p>\n<hr>\n<h4>ps. ssh timeout</h4>\n<p>타임 아웃이 걸린 ssh 접속을 오랜만에 했더니 명령어 기억이 나질 않았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export TMOUT=0</code></pre></div>","fields":{"tagSlugs":["/tags/모듈-설치/"],"slug":"/works/posts/2020-09-15--001"},"frontmatter":{"title":"[HKMC] 작업로그","tags":["모듈 설치"],"date":"2020-09-15","description":""}}},"pageContext":{"slug":"/works/posts/2020-09-15--001"}},"staticQueryHashes":[]}