{"componentChunkName":"component---src-templates-post-template-jsx","path":"/works/posts/2020-12-22--001.md","result":{"data":{"site":{"siteMetadata":{"title":"Blog by Eunyoung","subtitle":"EY's 개발 히스토리 블로그","copyright":"© All rights reserved.","author":{"name":"EunYoung","twitter":"#"},"disqusShortname":"","url":"https://eunyoung-autocrypt.github.io"}},"markdownRemark":{"id":"4e3827e0-33dc-51ec-9cd5-3d210b0debfb","html":"<h3>Slow Query(슬로우쿼리)</h3>\n<ul>\n<li>Slow Query(슬로우쿼리)는 지정된 시간보다 실행하는데 오래걸리는 쿼리에 대한 log</li>\n<li>특정 작업이 오래 걸린다면 로그를 통해 원인을 파악이 가능</li>\n</ul>\n<br>\n<h3>#1. 설정 방법</h3>\n<ul>\n<li>my.cnf 파일 설정</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># 3초 이상 소요된 쿼리 기록\n[mysqld]\nlog_slow_queries       = /var/log/mysql/mysql-slow.log\nlong_query_time = 3</code></pre></div>\n<br>\n<h3>#2. 설정 확인</h3>\n<ul>\n<li>\n<p>service restart 및 활성화 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ /etc/init.d/mysqld restart</code></pre></div>\n</li>\n</ul>\n<p>mysql> show variables like ‘slow<em>query</em>%’;</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;br&gt;\n\n### #3. 로그파일\n- 아래와 같은 형식으로 로그파일에 기록됨</code></pre></div>\n<h1>Query_time : 쿼리 처리시간</h1>\n<h1>Lock_time : lock이 걸린 횟수</h1>\n<h1>Row_sent : 조회 결과 Row 수</h1>\n<h1>Rows_examined : 조회 대상 ROW 수</h1>\n<h1>User@Host: DB<em>유저[DB</em>유저] @ server_hostname [서버IP]</h1>\n<h1>Query<em>time: 0.000599  Lock</em>time: 0.000163 Rows<em>sent: 3  Rows</em>examined: 86</h1>\n<p>SET timestamp=1489118717;\nselect count(*)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;br&gt;\n\n### #4. mysqladmin 명령어로 상태 출력</code></pre></div>\n<p>// -i5 : interval 5s\n$ mysqladmin -i5 status -u root -p\nEnter password:\nUptime: 10578  Threads: 1  Questions: 4809  Slow queries: 589  Opens: 1321  Flush tables: 1  Open tables: 348  Queries per second avg: 0.454</p>\n<h1>Uptime : MySQL server 시삭된 후 현재 시간 (초 단위)</h1>\n<h1>Threads : 현제 DB 서버에 연결된 유저수</h1>\n<h1>Questions : 서버 시작후 지금까지 요청된 쿼리수</h1>\n<h1>Slow queries : mysql 설정파일에 슬로우쿼리의 쿼리시간 이상을 가진 요청수</h1>\n<h1>Opens : 서버가 시작된 후 현재까지 열렸던 테이블수</h1>\n<h1>Open tables : 현재 열려 잇는 테이블 수</h1>\n<h1>Queries per second avg : 평균 초단 쿼리수</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"></code></pre></div>","fields":{"tagSlugs":["/tags/slow-query/"],"slug":"/works/posts/2020-12-22--001.md"},"frontmatter":{"title":"[MariaDB] SlowQuery 설정 및 확인","tags":["slow query"],"date":"2020-12-22","description":""}}},"pageContext":{"slug":"/works/posts/2020-12-22--001.md"}},"staticQueryHashes":[]}